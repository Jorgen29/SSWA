<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Negros Island Customer Map with Filters</title>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map {
      height: 100vh;
      width: 100%;
    }

    /* Custom filter box styling */
    .filter-box {
      background: white;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      font-family: Arial, sans-serif;
      font-size: 14px;
      line-height: 1.4;
    }
    .filter-box label {
      display: flex;
      align-items: center;
      margin: 4px 0;
      cursor: pointer;
    }
    .color-dot {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 6px;
    }
    #splash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.8s ease;
    }
    #splash img {
      max-width: 200px; /* adjust logo size */
    }
  </style>
</head>
<body>
  <!-- Splash Screen -->
  <div id="splash">
    <img src="logo.jpg" alt="Logo">
  </div>

  <div id="map"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
     // Hide splash after 2 seconds
    window.addEventListener("load", () => {
      setTimeout(() => {
        const splash = document.getElementById("splash");
        splash.style.opacity = 0;
        setTimeout(() => {
          splash.style.display = "none";
          document.getElementById("map").style.display = "block";
          initMap();
        }, 800); // wait for fade out
      }, 2000);
    });
    // Initialize map centered on Negros Island
    const map = L.map('map').setView([9.9, 123.0], 9);

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Define layers (groups)
    const layers = {
      CentralizedVendo: L.layerGroup(),
      Subscribers: L.layerGroup(),
      NapBox: L.layerGroup(),
      Towers: L.layerGroup()
    };

    // Example data
    const data = {
      CentralizedVendo: [
        { lat: 10.006, lng: 122.967, name: "Vendo Bacolod" }
      ],
      Subscribers: [
        { lat: 9.307, lng: 123.308, name: "Subscriber Dumaguete" }
      ],
      NapBox: [
        { lat: 10.5, lng: 123.4, name: "Nap Box North Negros" }
      ],
      Towers: [
        { lat: 9.9, lng: 122.9, name: "Tower Negros Center" }
      ]
    };

    // Colors for each type
    const colors = {
      CentralizedVendo: "blue",
      Subscribers: "green",
      NapBox: "black",
      Towers: "skyblue"
    };

    // Add markers to each layer
    for (let type in data) {
      data[type].forEach(item => {
        L.circleMarker([item.lat, item.lng], {
          radius: 6,
          color: colors[type],
          fillColor: colors[type],
          fillOpacity: 0.9
        })
        .bindPopup(`<b>${item.name}</b>`)
        .addTo(layers[type]);
      });
      // Add all layers to map by default
      layers[type].addTo(map);
    }

    // Create custom filter control
    const filterControl = L.control({ position: 'topleft' });
    filterControl.onAdd = function () {
      const div = L.DomUtil.create('div', 'filter-box');
      div.innerHTML = `
        <label><input type="checkbox" id="CentralizedVendo" checked>
          <span class="color-dot" style="background: ${colors.CentralizedVendo};"></span>
          Centralized Vendo
        </label>
        <label><input type="checkbox" id="Subscribers" checked>
          <span class="color-dot" style="background: ${colors.Subscribers};"></span>
          Subscribers
        </label>
        <label><input type="checkbox" id="NapBox" checked>
          <span class="color-dot" style="background: ${colors.NapBox};"></span>
          Nap Box
        </label>
        <label><input type="checkbox" id="Towers" checked>
          <span class="color-dot" style="background: ${colors.Towers};"></span>
          Towers
        </label>
      `;
      return div;
    };
    filterControl.addTo(map);

    // Handle checkbox changes
    function updateLayers() {
      for (let type in layers) {
        const checkbox = document.getElementById(type);
        if (checkbox && checkbox.checked) {
          map.addLayer(layers[type]);
        } else {
          map.removeLayer(layers[type]);
        }
      }
    }

    // Attach event listeners
    document.addEventListener("change", e => {
      if (layers[e.target.id]) {
        updateLayers();
      }
    });
  </script>
</body>
</html>
